# Cognitive Brain - 项目提案

**提案状态**: 待评审  
**创建日期**: 2026-02-14  
**作者**: OpenClaw Agent  
**版本**: v1.0

---

## 1. 项目概述

### 1.1 项目背景
Cognitive Brain 是一个面向数字员工的外置知识库平台。通过 MCP 协议为 OpenClaw 提供外挂知识能力，将通用智能机器人转变为特定领域的专业数字人。

### 1.2 核心目标
- **领域专业化**: 让 OpenClaw 具备特定领域专业技能
- **知识外挂**: 通过外置知识库扩展能力，不修改核心代码
- **增量学习**: 持续从新材料中学习，知识库自动进化
- **多领域支持**: 存储架构师只是第一个场景，未来可扩展到网络、AI 等领域

### 1.3 设计原则
- **纯文本优先**: 基于 Markdown + YAML，人类可读、易版本控制
- **推理驱动**: 基于 Page Index 链接跳转的推理网络，非向量相似度
- **松耦合**: 通过 MCP 协议接入，独立运行、动态切换
- **渐进式构建**: 先核心后完善，快速迭代

---

## 2. 需求分析

### 2.1 功能需求

#### MCP Server 接口
| ID | 需求描述 | 优先级 |
|----|---------|--------|
| FR-001 | 实现 MCP Server 协议 (stdio/sse) | P0 |
| FR-002 | `query_knowledge` 工具: 查询专业知识 | P0 |
| FR-003 | `learn_material` 工具: 学习新材料 | P0 |
| FR-004 | `get_status` 工具: 获取知识库状态 | P1 |
| FR-005 | 支持 domain 参数切换不同领域大脑 | P1 |

#### Page Index 系统
| ID | 需求描述 | 优先级 |
|----|---------|--------|
| FR-011 | Page 类型: skill/pattern/case/concept/faq | P0 |
| FR-012 | Page 结构: YAML Frontmatter + Markdown 正文 | P0 |
| FR-013 | Page ID 生成: {type}-{kebab-title}-{hash} | P0 |
| FR-014 | 知识链接: prerequisites/related/next_steps | P0 |

#### 推理引擎
| ID | 需求描述 | 优先级 |
|----|---------|--------|
| FR-031 | 意图识别: 理解用户查询意图 | P0 |
| FR-032 | 路径规划: 基于链接的跳转推理 | P0 |
| FR-034 | 多 Page 整合: 整合多个 Page 内容 | P0 |
| FR-035 | 答案组装: 结构化输出 | P0 |

#### 学习系统
| ID | 需求描述 | 优先级 |
|----|---------|--------|
| FR-051 | 文件扫描: 监控 sources/raw/ 新文件 | P0 |
| FR-052 | 格式转换: raw/ → processed/ → Markdown | P0 |
| FR-054 | LLM 知识抽取: 识别知识点类型 | P0 |
| FR-056 | Page 生成: 自动生成标准 Page | P0 |

### 2.2 非功能需求
| ID | 需求 | 目标值 |
|----|------|--------|
| NF-001 | MCP 查询响应时间 | P95 < 500ms |
| NF-002 | Page 加载时间 | < 100ms |
| NF-004 | 并发查询支持 | 50 QPS |
| NF-005 | Page 规模支持 | 10,000+ Pages/领域 |

---

## 3. 技术方案

### 3.1 技术选型
| 组件 | 选型 | 理由 |
|------|------|------|
| 语言 | Python 3.11+ | 生态丰富，MCP SDK 支持好 |
| MCP | mcp SDK | 官方 SDK，标准化协议 |
| 推理 | 纯文本链接跳转 | 符合 Page Index 设计理念 |
| 元数据 | SQLite | 轻量，无需额外服务 |
| LLM | Claude API | 知识抽取质量高 |
| 部署 | Docker Compose | 独立运行，易于管理 |

### 3.2 架构设计

```
┌─────────────────────────────────────────────────────────────────────┐
│                        OpenClaw (数字员工)                           │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │                   Cognitive Brain MCP Client                   │ │
│  │  - 意图识别                                                      │ │
│  │  - 上下文管理                                                    │ │
│  │  - 结果组装                                                      │ │
│  └───────────────────────────┬───────────────────────────────────┘ │
│                              │ MCP Protocol                         │
└──────────────────────────────┼──────────────────────────────────────┘
                               │ (stdio / sse)
┌──────────────────────────────┼──────────────────────────────────────┐
│                              ▼                                      │
│  ┌───────────────────────────────────────────────────────────────┐ │
│  │                   Cognitive Brain MCP Server                   │ │
│  │                                                                │ │
│  │   ┌──────────────┐   ┌──────────────┐   ┌──────────────┐     │ │
│  │   │   Ingest     │ → │   Process    │ → │    Store     │     │ │
│  │   │   (学习)      │   │   (处理)      │   │   (存储)      │     │ │
│  │   └──────────────┘   └──────────────┘   └──────────────┘     │ │
│  │                                                                │ │
│  │   ┌──────────────────────────────────────────────────────┐   │ │
│  │   │              Reasoning Engine (推理引擎)              │   │ │
│  │   │   - 意图理解                                               │ │
│  │   │   - 路径规划 (Page 链接跳转)                               │ │
│  │   │   - 答案组装                                               │ │
│  │   └──────────────────────────────────────────────────────┘   │ │
│  │                                                                │ │
│  └───────────────────────────────────────────────────────────────┘ │
│                              │                                      │
│   ┌──────────────────────────┴──────────────────────────┐          │
│   │              Domain Knowledge Base                   │          │
│   │   /data/knowledge-brains/storage-architect/         │          │
│   │   /data/knowledge-brains/network-architect/         │          │
│   │   /data/knowledge-brains/ai-engineer/               │          │
│   └──────────────────────────────────────────────────────┘          │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 4. 实施计划

### 4.1 里程碑规划

#### Milestone 1: MVP (Week 1-2)
- MCP Server 基础框架
- Page Index 存储与查询
- 基础学习流程 (PDF→Markdown→Page)
- 存储架构师领域 (10+ Page)

#### Milestone 2: 核心功能 (Week 3-4)
- 完整推理引擎 (决策树 + 链接跳转)
- query_knowledge 完善
- 增量学习自动化
- 50+ Page 覆盖

#### Milestone 3: 完善优化 (Week 5-6)
- 多领域支持框架
- 学习效果评估
- 性能优化
- 完整测试

### 4.2 交付物
| 阶段 | 交付物 |
|------|--------|
| Proposal | proposal.md (本文档) |
| Specification | spec.md, design.md, tasks.md |
| Implementation | 完整代码库 |
| Archive | archive/ 归档文档 |

---

## 5. 资源需求

### 5.1 人力资源
- 开发工程师: 1人
- 测试验证: 自动化测试

### 5.2 技术资源
- Python 3.11+
- Claude API Key
- Docker & Docker Compose

### 5.3 存储资源
- /data/knowledge-brains/ 目录空间
- 预计初期 1GB，随学习增长

---

## 6. 风险与对策

| 风险 | 可能性 | 影响 | 对策 |
|------|--------|------|------|
| LLM 抽取质量不稳定 | 中 | 高 | Prompt 工程优化 |
| Page 链接构建不准确 | 中 | 中 | 自动化 + 人工校验 |
| 推理路径过长导致超时 | 中 | 中 | 深度限制 + 缓存机制 |
| MCP 协议理解偏差 | 低 | 高 | 参考官方文档 + 测试验证 |

---

## 7. 审批记录

| 日期 | 审批人 | 状态 | 备注 |
|------|--------|------|------|
| 2026-02-14 | - | 草稿 | 初始版本 |

---

## 附录

### A. 参考文档
- 架构设计文档: /data/zhang/tenon/cognitive-brain/architecture-design.md
- PRD: /data/zhang/tenon/cognitive-brain/prd.md
- MCP Protocol: https://modelcontextprotocol.io/

### B. 术语表
- **Cognitive Brain**: 认知大脑，外置知识库平台
- **Page Index**: 知识页面索引
- **MCP**: Model Context Protocol
- **Reasoning Path**: 推理路径
- **Domain**: 知识领域
